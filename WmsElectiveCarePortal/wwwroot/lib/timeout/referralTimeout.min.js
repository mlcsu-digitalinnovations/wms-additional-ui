!function (e, i) { "use strict"; e.fn.referralTimeout = function (n) { var t, o, s, a, u, r, c, l, d, m, f = e.extend({ idleNotification: 3e5, sessionRemaining: 3e5 }, n), g = 0, T = function (e) { clearTimeout(t), r = 0, a = (new Date).getTime(), t = setTimeout(function () { w(e) }, 100) }, h = function (i) { var n, t; c += 100, m = (new Date).getTime() - u - c, c >= f.sessionRemaining - g ? y("endsession") : (1e3 === (l += 100) && 0 !== s && (s -= 1, e("#sessioncountdown").html((n = s, ((t = Math.floor(n / 60)) < 10 ? "0" + t : t) + ":" + ((n -= 60 * t) < 10 ? "0" + n : n))), l = 0), o = setTimeout(function () { h(i) }, 100 - m)) }, w = function (e) { r += 100, d = (new Date).getTime() - a - r; var i = (new Date).getTime() - a; i >= f.idleNotification + f.sessionRemaining && y("endsession"), r === f.idleNotification ? (g = (i -= 1e3) > r ? f.sessionRemaining - (i - r) : 0, v()) : t = setTimeout(function () { w(e) }, 100 - d) }, v = function () { var i; i = "DialogTimer", clearTimeout(o), c = 0, l = 0, u = (new Date).getTime(), s = Math.floor((f.sessionRemaining - g) / 1e3), o = setTimeout(function () { h(i) }, 100), e('<div id="notifyLogout"><p>For your security your session will end in <span id="sessioncountdown">' + s + "</span> due to inactivity. Select End Session to end it now otherwise select Continue to stay logged in.</p></div>").dialog({ title: "Session Timeout", modal: !0, width: "auto", maxWidth: 300, height: "auto", fluid: !0, resizable: !1, buttons: { Continue: function () { e.ajax({ url: "/selfReferral/session-ping", context: document.body }), e(this).dialog("close"), e(this).empty(), e(this).remove(), clearTimeout(o), T("IdleTimer") }, "End Session": function () { y() } } }) }, y = function (e) { clearTimeout(t), clearTimeout(o); var n = "/selfReferral/sign-out"; return "endsession" === e && (n = "/session/session-ended"), i.location.replace(n) }; return this.each(function () { T("IdleTimer") }) } }(jQuery, window);